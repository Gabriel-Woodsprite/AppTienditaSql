<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane prefHeight="791.0" prefWidth="1505.0" styleClass="main" stylesheets="@css/Venta.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.apptienditasql.controller.VentasController">

    <!-- Panel Izquierdo: Agregar Productos -->
    <VBox layoutX="10.0" layoutY="10.0" prefHeight="722.0" prefWidth="663.0" spacing="10.0">

        <!-- Búsqueda de producto -->
        <HBox spacing="10.0">
            <TextField fx:id="txtBuscarProducto" prefHeight="40.0" prefWidth="314.0" promptText="Buscar producto..." HBox.hgrow="ALWAYS" />
            <TextField fx:id="txtCantidad" prefHeight="40.0" prefWidth="161.0" promptText="Cant." />
            <Button fx:id="btnAgregar" prefHeight="42.0" prefWidth="104.0" text="Agregar" />
        </HBox>

        <!-- Tabla de productos -->
        <TableView fx:id="tablaVenta" prefHeight="553.0" prefWidth="663.0" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="colProducto" prefWidth="180.0" text="Producto" />
                <TableColumn fx:id="colCantidad" text="Cantidad" />
                <TableColumn fx:id="colPrecio" prefWidth="120.0" text="Precio Unitario" />
                <TableColumn fx:id="colSubtotal" prefWidth="100.0" text="Subtotal" />
                <TableColumn fx:id="colEliminar" prefWidth="40.0" text="❌" />
            </columns>
        </TableView>

        <!-- Botón cancelar venta -->
        <Button fx:id="btnCancelarVenta" text="Cancelar Venta" />
    </VBox>

    <!-- Panel Derecho: Finalización -->
    <VBox alignment="TOP_LEFT" layoutX="708.0" layoutY="11.0" prefHeight="771.0" prefWidth="600.0" spacing="15.0">

        <!-- Título -->
        <Label text="Resumen de Venta" />

        <!-- Folio y Fecha -->
        <GridPane hgap="10" vgap="10">
            <Label text="Folio:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <Label fx:id="lblFolio" text="0001" GridPane.columnIndex="1" GridPane.rowIndex="0" />

            <Label text="Fecha:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
            <Label fx:id="lblFecha" text="2025-06-10 14:30" GridPane.columnIndex="1" GridPane.rowIndex="1" />

            <columnConstraints>
                <ColumnConstraints />
                <ColumnConstraints />
            </columnConstraints>
            <rowConstraints>
                <RowConstraints />
                <RowConstraints />
            </rowConstraints>
        </GridPane>

        <!-- Separador -->
        <Separator prefWidth="300" />

        <!-- Totales -->
        <GridPane hgap="10" vgap="10">
            <Label text="Subtotal:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <Label fx:id="lblSubtotal" text="1" GridPane.columnIndex="1" GridPane.rowIndex="0" />

            <Label text="IVA (16%):" GridPane.columnIndex="0" GridPane.rowIndex="1" />
            <Label fx:id="lblIVA" text="1" GridPane.columnIndex="1" GridPane.rowIndex="1" />

            <Label text="Total:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
            <Label fx:id="lblTotal" text="1" GridPane.columnIndex="1" GridPane.rowIndex="2" />

            <columnConstraints>
                <ColumnConstraints />
                <ColumnConstraints />
            </columnConstraints>
            <rowConstraints>
                <RowConstraints />
                <RowConstraints />
                <RowConstraints />
            </rowConstraints>
        </GridPane>

        <!-- Botón Finalizar Venta -->
        <Button fx:id="btnFinalizarVenta" maxWidth="Infinity" text="Finalizar Venta" />

        <!-- Panel para previsualización del ticket -->
        <TextArea fx:id="txtAreaTicket" editable="false" prefHeight="200.0" />

        <!-- Panel de Reportes y Estadísticas -->
        <TitledPane text="Reportes y Estadísticas" expanded="false">
            <VBox spacing="10.0">
               <!-- <padding>
                    <Insets top="10.0" right="10.0" bottom="10.0" left="10.0" />
                </padding>-->

                <!-- Alerta resurtido -->
                <Button fx:id="btnAlertaResurtido" text="Ver productos por resurtir" />

                <!-- Reporte por producto, categoría o fecha -->
                <HBox spacing="5.0">
                    <TextField fx:id="txtBuscarReporte" promptText="Producto / Categoría" />
                    <DatePicker fx:id="dpFechaInicio" />
                    <DatePicker fx:id="dpFechaFin" />
                    <Button fx:id="btnBuscarReporte" text="Buscar" />
                </HBox>

                <!-- Estadísticas -->
                <Label fx:id="lblProductoMasVendido" text="Producto más vendido: -" />
                <Label fx:id="lblVentasDia" text="Ventas del día: $0.00" />
                <Label fx:id="lblVentasSemana" text="Ventas de la semana: $0.00" />
                <Label fx:id="lblVentasMes" text="Ventas del mes: $0.00" />
                <Label fx:id="lblVentasAnio" text="Ventas del año: $0.00" />
                <Label fx:id="lblVentasAcumuladasMes" text="Ventas acumuladas del mes: $0.00" />
            </VBox>
        </TitledPane>

    </VBox>

</AnchorPane>
